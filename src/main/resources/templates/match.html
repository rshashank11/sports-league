<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
        lang = "en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match Bracket</title>
    <th:block th:replace="fragments/fonts :: font-links"></th:block>
    <th:block th:replace="fragments/styles :: style-links"></th:block>
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/match.css}">
</head>
<body>
    <nav th:replace="fragments/header :: header"></nav>
    <h1 style="text-align: center;color: #c0392b;">
        League 1
    </h1>
    <div class="bracket">
        <div class="round" th:each="round : ${rounds}">
            <div class="match" th:each="match : ${round.matches}">
                <div class="player" th:classappend="${match.player1Score > match.player2Score} ? 'winner' : ''">
                    <span><img th:src="@{/images/image.png}" alt="Player Image"></span>
                    <span th:text="${match.playerName1}">Player 1</span>

                    <!-- This is for admin only -->
                    <div sec:authorize="hasRole('ROLE_ADMIN')">
                        <input type="number" name="player1Score"
                               th:value="${match.player1Score}"
                               min="0" max="1"/>
                    </div>

                    <!-- Show score to non-admin -->
                    <span class="score" sec:authorize="!hasRole('ROLE_ADMIN')"
                          th:text="${match.player1Score}">0</span>
                </div>
                <div class="player" th:classappend="${match.player2Score > match.player1Score} ? 'winner' : ''">
                    <span><img th:src="@{/images/image.png}" alt="Player Image"></span>
                    <span th:text="${match.playerName2}">Player 2</span>

                    <!-- This is for admin only -->
                    <div sec:authorize="hasRole('ROLE_ADMIN')">
                        <input type="number" name="player1Score"
                               th:value="${match.player1Score}"
                               min="0" max="1"/>
                    </div>

                    <!-- Show score to non-admin -->
                    <span sec:authorize="!hasRole('ROLE_ADMIN')"
                          th:text="${match.player1Score}">0</span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
